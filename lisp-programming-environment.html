<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- Dec 14, 2020 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Getting your Lisp programming environment up and running</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Marcus Santos" />
<meta name="keywords" content="draft" />
<link rel='icon' type='image/x-icon' href='/images/favicon.ico'/>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://code.cdn.mozilla.net/fonts/fira.css'>
<link rel='stylesheet' href='css/site.css?v=2' type='text/css'/>
<link rel='stylesheet' href='css/custom.css' type='text/css'/>
<link rel='stylesheet' href='css/syntax-coloring.css' type='text/css'/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><header id="top" class="status">
<div class='intro'>
  <!--
  <img src='/images/about/profile.png' alt='Marcus Santos' class='no-border'/>
  -->
  <h1>
    <span class="gray">Marcus</span>
    <span class="black">Santos</span>
  </h1>
  <p>Emacs &  Lisp enthusiast</p>
</div>

<div class='nav'>
<ul>
<li><a href='/'>Blog</a>.</li>
<li><a href='http://github.com/'>GitHub</a>.</li>
<!--
<li><a href='https://www.reddit.com/user/'>Reddit</a>.</li>
<li><a href='/index.xml'>RSS</a>.</li>
-->
<li><a href='/about/'>About</a></li>
</ul>
</div>
</header>
<main id="content">
<h1 class="title">Getting your Lisp programming environment up and running
<br />
<span class="subtitle">Published on Dec 11, 2020 by Marcus Santos.</span>
</h1>
<blockquote>
<p>
Anyone could learn Lisp in one day, except that if they already knew Fortran, it would take three days. <a href="https://www.youtube.com/watch?v=YaWVHyIBVeI">&#x2014;Marvin Minsky</a>
</p>
</blockquote>

<blockquote>
<p>
An infinite number of monkeys typing into GNU Emacs would never make a good program. &#x2014;Linus Torvalds
</p>
</blockquote>

<p>
Thanks go to E. Costa for inspiring me to write this tutorial &#x2013; the Introduction and Roswell sections are essentially direct translations from the original text of an email he sent to the members of <a href="https://medium.com/@dellavos">Della-Vos group</a>.
</p>

<section id="outline-container-orga0e1168" class="outline-2">
<h2 id="orga0e1168">Introduction</h2>
<div class="outline-text-2" id="text-orga0e1168">
<p>
Paul Graham explains in his book <i>On Lisp</i> that the Lisp programmer does not directly attack a problem: they create a <i>tower of languages</i> specialized in the problem so that the solution is simple and direct. You may need to work on several floors of this tower yourself, but it is also possible to outsource some floors.
</p>

<p>
In this article we will see several specialized floors of the Lisp programming tower: text editing (<b>Emacs</b>), installation (<b>Roswell</b>), package management (<b>Quicklisp</b>), and program development utilities (<b>RUTILS</b>).
</p>
</div>
</section>

<section id="outline-container-org6f3793d" class="outline-2">
<h2 id="org6f3793d">Hardware requirements</h2>
<div class="outline-text-2" id="text-org6f3793d">
<p>
A computer running a Unix-like or MacOS operating system.
</p>
</div>
</section>

<section id="outline-container-orgb2e9c3a" class="outline-2">
<h2 id="orgb2e9c3a">Text editor - Emacs</h2>
<div class="outline-text-2" id="text-orgb2e9c3a">
<p>
Install Gnu Emacs version 27.1 or greater. Download and installation instructions are available at <a href="https://www.gnu.org/software/emacs/">https://www.gnu.org/software/emacs/</a>.
</p>

<p>
Once you have installed Emacs, create your Emacs configuration file by typing the following commands on the shell terminal (assuming <code>$</code> represents the shell prompt):
</p>

<pre class="example">
$ cd
$ emacs -nw .emacs
</pre>

<p>
The command above will open Emacs in your terminal window for editing the file <i>.emacs</i> . Copy and paste the following Emacs Lisp (elisp) code into the editor:
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span class="org-keyword">setq</span> inhibit-splash-screen t)
(set-face-attribute 'default nil <span class="org-builtin">:height</span> 160)
(global-set-key (kbd <span class="org-string">"C-z"</span>) ctl-x-map)
(global-visual-line-mode t) <span class="org-comment-delimiter">; </span><span class="org-comment">wrap word at the end of line</span>

<span class="org-comment-delimiter">;; </span><span class="org-comment">Informs the location of the Lisp compiler</span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">NOTE: certify that your sbcl binary file is located in </span>
<span class="org-comment-delimiter">;; </span><span class="org-comment">/usr/local/bin/</span>
(<span class="org-keyword">setq</span> inferior-lisp-program <span class="org-string">"/usr/local/bin/sbcl"</span>)
(add-to-list 'load-path <span class="org-string">"~/.emacs.d/slime/"</span>)
(<span class="org-keyword">require</span> '<span class="org-constant">slime</span>)
<span class="org-comment-delimiter">;; </span><span class="org-comment">Putting sbcl in org-mode</span>
(org-babel-do-load-languages
  'org-babel-load-languages
  '((lisp . t)
    (emacs-lisp . t)))
</pre>
</div>

<p>
To save the <i>.emacs</i> file, press the keystroke sequence <code>Ctrl-x Ctrl-s</code> (press <code>Ctrl</code>, keep pressing it down, then press the key <code>x</code>, release both keys, then press <code>Ctrl</code>, keep the <code>Ctrl</code> key down, press the key <code>s</code>, then release both keys).
</p>

<p>
To quit emacs, press <code>Ctrl-x Ctrl-c</code> .
</p>
</div>
</section>

<section id="outline-container-orgb9525c4" class="outline-2">
<h2 id="orgb9525c4">Installation of the Lisp compiler</h2>
<div class="outline-text-2" id="text-orgb9525c4">

<div id="org79c6a55" class="figure">
<p><img src="https://www.lisperati.com/lisplogo_fancy_256.png" alt="lisplogo_fancy_256.png" />
</p>
</div>

<p>
We will start by installing <i>Roswell</i>. You may be asking, what is Roswell? Nobody knows for sure, we only know that it is not possible to use Lisp without Roswell. It is said that in 1947, an Unidentified Flying Object (UFO) crashed in the small town of Roswell, New Mexico. Ten years later, Lisp emerged, which many people claim to be alien technology. The Roswell program, named after the UFO city, is said to be an installer, launcher, manager and <i>much more</i>. We have no idea what &ldquo;much more&rdquo; is. We do know that Roswell is an installer, although no one is sure why we need it to install things, since there is Quicklisp, which is an installer. We think Quicklisp is an installation language, and Roswell is a language that specializes in Quicklisp.
</p>

<p>
You can find the instructions on how to install Roswell on this website <a href="https://github.com/roswell/roswell">https://github.com/roswell/roswell</a>
</p>

<p>
Once you have installed Roswell, you can install the Steel Bank Common Lisp (SBCL) compiler by typing the following commands on the shell terminal:
</p>

<pre class="example" id="orgbabe6ad">
$ ros install sbcl-bin
$ ros install sbcl
</pre>

<p>
Next, we need to indicate a path for all these programs. If you are using a Mac computer, insert the following line in your <code>~/.bash_profile/</code> file. If you are using Linux, then insert it in your <code>~/.bashrc</code> file.
</p>

<pre class="example" id="org851228a">
export PATH=$PATH:~/.roswell/bin
</pre>
</div>
</section>

<section id="outline-container-org9e297d7" class="outline-2">
<h2 id="org9e297d7">Installation of Lisp utility tools</h2>
<div class="outline-text-2" id="text-org9e297d7">
<p>
We will need three tools:
</p>
<ul class="org-ul">
<li><p>
<i><a href="https://common-lisp.net/project/slime/">SLIME</a></i>, an Emacs mode for developing Common Lisp applications: To install SLIME, type the following commands on the terminal:
</p>
<pre class="example">
$ cd ~/.emacs.d
$ git clone https://github.com/slime/slime.git
</pre></li>
<li><i>Quicklisp</i>, a library manager for Common Lisp: The installation instructions are available at this website <a href="https://www.quicklisp.org/beta/">https://www.quicklisp.org/beta/</a>. The installation will result in the creation of configuration files in the user&rsquo;s home directory, viz. <code>~/.sbclrc</code> and <code>~/quicklisp.lisp</code>, and metadata files in the user&rsquo;s directory  <code>~/quicklisp/</code></li>
<li><i>Radical Utilities (RUTIS)</i>, a syntactic utilities package for Common Lisp. Read the next section for instructions on how to load RUTILS.</li>
</ul>
</div>
</section>

<section id="outline-container-orgdde694b" class="outline-2">
<h2 id="orgdde694b">Calling Lisp from Emacs</h2>
<div class="outline-text-2" id="text-orgdde694b">
<p>
If all the installation steps have worked so far, you should be able to call Lisp from Emacs or from the shell terminal. Let&rsquo;s call it from Emacs first, as follows:
</p>
<ol class="org-ol">
<li><p>
Launch Emacs: At this point, you should be able to launch Emacs from your Applications Menu. You can also launch Emacs by typing the command below on the shell window:
</p>
<pre class="example">
$ emacs -nw
</pre></li>
<li><p>
Invoke SBCL&rsquo;s Read-eval-print-loop (REPL) through slime: From inside Emacs, type <code>Alt-x</code> (press the <code>Alt</code> key, release it, then press <code>x</code>). This will prompt you to type commands on Emacs&rsquo;s minibuffer window at the bottom your Emacs window. Type the command <code>slime</code> then press <code>Enter</code>. Emacs will open Lisp&rsquo;s REPL on a new buffer window. Below is what you will see in this new buffer window:
</p>
<pre class="example">
; SLIME 2.24
CL-USER&gt; 
</pre>
<p>
This is the Lisp prompt where you can type and evaluate Lisp expressions. Here is what happens when I enter the lisp expression <code>(* 4 3)</code> at the REPL and press Enter:
</p>
<pre class="example">
; SLIME 2.24
CL-USER&gt; (* 4 3)
12
CL-USER&gt;
</pre></li>
<li><p>
Next, we will use Quicklisp to load the Radical Utilities (RUTILS) tools. RUTILS &ldquo;that aims to radically simplify the Lisp programmer&rsquo;s life both in the REPL and in large system development&rdquo; (from their website at <a href="https://github.com/vseloved/rutils">https://github.com/vseloved/rutils</a>). Type the following commands at the REPL:
</p>
<pre class="example">
CL-USER&gt; (ql:quickload :rutils)
CL-USER&gt; (in-package :rtl-user)
CL-USER&gt; (named-readtables:in-readtable rutils-readtable)
</pre></li>
</ol>
</div>

<div id="outline-container-org54bc4d4" class="outline-3">
<h3 id="org54bc4d4">Calling SBCL from the terminal</h3>
<div class="outline-text-3" id="text-org54bc4d4">
<p>
In Step 2 above, we invoked SBCL from inside Emacs. Alternatively, you can invoke SBCL from your terminal window. Before you try the example below, I suggest installing the readline wrapper <i>rlwrap</i>, a small utility that uses the GNU readline library to allow the editing of keyboard input for any command. Source and installation instructions are available at <a href="https://github.com/hanslub42/rlwrap">https://github.com/hanslub42/rlwrap</a>
</p>

<p>
Now, the example of how to invoke SBCL from the terminal  (using rlwrap):
</p>

<pre class="example">
$ rlwrap sbcl
This is SBCL 1.5.6, an implementation of ANSI Common Lisp.
More information about SBCL is available at &lt;http://www.sbcl.org/&gt;.

SBCL is free software, provided as is, with absolutely no warranty.
It is mostly in the public domain; some portions are provided under
BSD-style licenses.  See the CREDITS and COPYING files in the distribution for more information.
* (* 3 4)
12
* (/ (* 4 3) 2)
6 
* (princ "Hello world!")
Hello world!
"Hello world!"
*
</pre>
</div>
</div>
</section>

<section id="outline-container-org72a68a9" class="outline-2">
<h2 id="org72a68a9">Hello World!</h2>
<div class="outline-text-2" id="text-org72a68a9">
<p>
Now that we have all we need to write and run Lisp programs, let&rsquo;s see how to use Emacs to create and run a Lisp program that prints <code>"Hello World!"</code>.
</p>

<ol class="org-ol">
<li><p>
Type the following commands on the shell terminal.
</p>
<pre class="example" id="org6d5e957">
$ cd
$ mkdir wrkLisp
$ cd wrkLisp
</pre></li>
<li>Launch emacs either from your Applications menu or from the command line with the command <code>emacs -nw</code>.</li>
<li>In Emacs, press <code>Ctrl-x Ctrl-f</code> (press <code>Ctrl</code>, keep pressing <code>Ctrl</code> then press <code>x</code>, release both keys, then press <code>Ctrl</code>, keep pressing it then press <code>f</code>, then release both keys). This keystroke sequence will prompt you to input the name of your program buffer. Type in <code>~/wrkLisp/hello-world.lisp</code> and press <code>Enter</code>. If you have mistyped the key sequence, you can cancel by typing <code>Ctr-g</code> (press <code>Ctrl</code>, keep pressing it, then press <code>g</code>, then release both keys).</li>
<li>Now that you have opened a new buffer called <code>hello-world.lisp</code>, type the following Lisp program in it.</li>
</ol>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">hello</span> ()
  (print <span class="org-string">"Hello World!"</span>))
</pre>
</div>
<ol class="org-ol">
<li>Save the contents of the buffer by typing <code>Ctrl-x Ctrl-s</code>. This command will save the contents of the buffer in <code>~/wrkLisp/hello-world.lisp</code></li>
<li>To run our program, let&rsquo;s first invoke SCBL&rsquo;s REPL. Type <code>Alt-x</code> then type <code>slime</code> then press <code>Enter</code>. Emacs will then split its window in two, one window containing your program, and the other window showing the REPL prompt.</li>
<li><p>
Click anywhere inside the REPL window. Load our program by typing the following Lisp expression <code>(load "hello-world.lisp")</code> on the REPL, then press <code>Enter</code>. 
</p>
<pre class="example" id="org86a83e1">
; SLIME 2.24
CL-USER&gt; (load "hello-world.lisp")
T
CL-USER&gt;
</pre>
<p>
Notice that SBCL has evaluated the expression and printed <code>T</code> (true).  For now, it suffices for you to know that <code>T</code> means function <code>load</code> did not have problems evaluating your program. 
</p></li>
<li><p>
Finally, let&rsquo;s call function <code>hello</code> at the REPL.
</p>
<pre class="example" id="orgd77b64e">
CL-USER&gt; (hello)

"Hello World!" 
"Hello World!"
CL-USER&gt; 
</pre>
<p>
Notice that <i>&ldquo;Hello World!&rdquo;</i> got printed twice. That is ok. You will learn why later. If you would like to make changes to your program, save them by executing Step 5 above, then load your program and run your functions at the REPL by executing Steps 7 and 8.
</p></li>
<li>To quit Emacs, type <code>Ctrl-x Ctrl-c</code>. If there are any unsaved file buffers or active processes running on other buffers, such as SBCL&rsquo;s REPL, Emacs will ask you to confirm you would like to save those files and kill those processes.</li>
</ol>
</div>
</section>

<section id="outline-container-org52d96fc" class="outline-2">
<h2 id="org52d96fc">Learning further</h2>
<div class="outline-text-2" id="text-org52d96fc">
<p>
At this early stage of your Lisp programming journey, I strongly encourage you to spend some time to learn the basics of editing text/programs in Emacs. This skill will speed up your learning of Lisp programming tremendously. There is a plethora of online tutorials teaching the basics of Emacs. I have found a particularly interesting article that answers a question you must be itching to ask me: <a href="https://opensource.com/article/20/12/emacs">why Emacs?</a> And I also have found another interesting article answering another question I feel you are also itching to ask me: <a href="https://stackoverflow.com/questions/2036244/whats-so-great-about-lisp">what&rsquo;s so great about Lisp?</a>
</p>


<div class='comments'><div id='disqus_thread'></div><script type='text/javascript'>var disqus_shortname = 'johndoe-example-com'; (function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script>  <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript></div>
</div>
</section>
</main>
<footer id="postamble" class="status">
<div class='footer'>
  Copyright © 2020 <a href='mailto:m3santos@ryerson.ca'>Marcus Santos.</a><br>
  Inspired by <a href='https://nicolas.petton.fr'>https://nicolas.petton.fr</a> <br>
  Last updated on Dec 14, 2020. Generated using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.4).
</div>
</footer>
</body>
</html>
