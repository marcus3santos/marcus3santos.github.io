<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- Dec 29, 2021 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Getting your (Portacle) Emacs/Slime-based Lisp programming environment up and running for CPS305</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Marcus Santos" />
<meta name="keywords" content="draft" />
<link rel='icon' type='image/x-icon' href='/images/favicon.ico'/>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<link rel='stylesheet' href='https://code.cdn.mozilla.net/fonts/fira.css'>
<link rel='stylesheet' href='css/site.css?v=2' type='text/css'/>
<link rel='stylesheet' href='css/custom.css' type='text/css'/>
<link rel='stylesheet' href='css/syntax-coloring.css' type='text/css'/>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="/"> UP </a>
 |
 <a accesskey="H" href="/"> HOME </a>
</div><header id="top" class="status">
<div class='intro'>
  <!--
  <img src='/images/about/profile.png' alt='Marcus Santos' class='no-border'/>
  -->
  <h1>
    <span class="gray">Marcus</span>
    <span class="black">Santos</span>
  </h1>
  <p>Emacs &  Lisp enthusiast</p>
</div>

<div class='nav'>
<ul>
<li><a href='/'>Blog</a>.</li>
<li><a href='http://github.com/marcus3santos/'>GitHub</a>.</li>
<!--
<li><a href='https://www.reddit.com/user/'>Reddit</a>.</li>
<li><a href='/index.xml'>RSS</a>.</li>
-->
<li><a href='http://ryerson.ca/msantos/about/'>About</a>.</li>
<!-- <li><a href='/about/'>About</a></li>
-->
</ul>
</div>
</header>
<main id="content">
<h1 class="title">Getting your (Portacle) Emacs/Slime-based Lisp programming environment up and running for CPS305
<br />
<span class="subtitle">Published on Dec 11, 2020 by Marcus Santos.</span>
</h1>
<blockquote>
<p>
&ldquo;Lisp is worth learning for the profound enlightenment experience you will have when you finally get it; that experience will make you a better programmer for the rest of your days, even if you never actually use Lisp itself a lot.&rdquo; &#x2014; Eric Raymond, &ldquo;How to Become a Hacker&rdquo;
</p>
</blockquote>

<blockquote>
<p>
&ldquo;Lisp is the red pill.&rdquo; &#x2014; John Fraser <a href="https://groups.google.com/g/comp.lang.lisp/c/5VW9lRDb-ww/m/KKygqY5n4E4J">Source</a>
</p>
</blockquote>

<section id="outline-container-orgd05f367" class="outline-2">
<h2 id="orgd05f367">Introduction</h2>
<div class="outline-text-2" id="text-orgd05f367">
<p>
Paul Graham explains in his book <i>On Lisp</i> that the Lisp programmer
does not directly attack a problem: they create a <i>tower of languages</i>
specialized in the problem so that the solution is simple and
direct. You may need to work on several floors of this tower yourself,
but it is also possible to outsource some floors. Therefore, before
you start programming in Lisp, this tutorial will teach you how to
install and set up the following &ldquo;specialized floors&rdquo; of the Lisp
programming tower: 
</p>
<ul class="org-ul">
<li>text editor (<b>Emacs</b>); you may be tempted to use another text editor
but I strongly advise you to choose carefully; stay away from
program text editors that do not perform automatic parenthesis
matching; it is virtually impossible to write lisp code without it;</li>
<li>the Steel Bank Common Lisp (<b>SBCL</b>) compiler;</li>
<li>package management (<b>Quicklisp</b>); and</li>
<li>the programming utilities we will use in the CPS305 course.</li>
</ul>
</div>
</section>


<section id="outline-container-org5d7246d" class="outline-2">
<h2 id="org5d7246d">Portacle</h2>
<div class="outline-text-2" id="text-org5d7246d">
<p>
<a href="https://portacle.github.io/">Portacle</a> is a portable and multiplatform Lisp development environment
that contains Emacs, Slime (a Superior Lisp programming Interaction
Mode for Emacs), SBCL, and Quicklisp.
</p>
</div>

<div id="outline-container-org2d7fb47" class="outline-3">
<h3 id="org2d7fb47">Installing Portacle</h3>
<div class="outline-text-3" id="text-org2d7fb47">
<p>
If you are not installing on a Mac, then just follow the instructions on the <a href="https://portacle.github.io/">Portacle website</a>.
</p>
</div>

<div id="outline-container-orgae8549e" class="outline-4">
<h4 id="orgae8549e">Installing portacle on a Mac</h4>
<div class="outline-text-4" id="text-orgae8549e">
<p>
Type on a shell the command
</p>
<div class="org-src-container">
<pre class="src src-shell">$ curl -L https://github.com/portacle/portacle/releases/download/1.4/mac-portacle.dmg --output mac-portacle.dmg
</pre>
</div>
<p>
Follow the steps shown on the site below to circumvent Apple&rsquo;s security.
<a href="https://github.com/portacle/portacle/issues/53">https://github.com/portacle/portacle/issues/53</a>
If you are still having issues with Apple&rsquo;s security, then type the command below on a shell  
</p>
<div class="org-src-container">
<pre class="src src-shell">$ sudo   xattr    -r    -d    com.apple.quarantine    /Applications/portacle/
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9b81a68" class="outline-3">
<h3 id="org9b81a68">Configuring Portacle</h3>
<div class="outline-text-3" id="text-org9b81a68">
<ol class="org-ol">
<li><p>
Using a programming text editor, open the file located in the <code>portacle/config/users.el</code>, copy-paste and save the code below at the bottom of the program already in <code>users.el</code>:
</p>
<div class="org-src-container">
<pre class="src src-lisp">(remove-hook 'slime-repl-mode-hook 'enable-paredit-mode) <span class="org-comment">; disable paredit-mode for the REPL</span>
(remove-hook 'lisp-mode-hook 'enable-paredit-mode)       <span class="org-comment">; disable paredit-mode for lisp files</span>
</pre>
</div></li>
<li>Quit portacle, then open it again so it loads the above new configuration.</li>
</ol>
</div>
</div>

<div id="outline-container-org141a35a" class="outline-3">
<h3 id="org141a35a">Installing Programming Utilities</h3>
<div class="outline-text-3" id="text-org141a35a">
<ol class="org-ol">
<li><p>
Clone the GitHub repository containing the CPS305 programming utilities Quicklisp package in you  <code>portacle/projects/</code> directory 
</p>
<div class="org-src-container">
<pre class="src src-shell">$ cd /Applications/projects/
$ git clone https://github.com/marcus3santos/cps305.git
</pre>
</div></li>
<li><p>
Load the programming utilities package by typing the command below on Portacle&rsquo;s REPL:
</p>
<div class="org-src-container">
<pre class="src src-lisp">CL-USER&gt; (ql:quickload <span class="org-builtin">:CPS305</span>) <span class="org-comment">; Press Enter</span>
To load <span class="org-string">"cps305"</span>:
  Load 1 ASDF system:
    cps305
<span class="org-comment-delimiter">; </span><span class="org-comment">Loading "cps305"</span>
......
(<span class="org-builtin">:CPS305</span>)
CL-USER&gt; 
</pre>
</div></li>
</ol>
</div>
</div>
</section>

<section id="outline-container-org2ca727d" class="outline-2">
<h2 id="org2ca727d">Hello World!</h2>
<div class="outline-text-2" id="text-org2ca727d">
<p>
Now we have all we need to write and run Lisp programs. Let&rsquo;s see how to use Portacle (i.e., Emacs, Slime, and the lisp compiler) to create and run a Lisp program that prints <code>"Hello World!"</code>.
</p>


<ol class="org-ol">
<li>On Portacle, press <code>C-x C-f</code> (i.e., press <code>Control</code>, press <code>x</code>, release both keys, then press <code>Control</code>, press <code>y</code>, release both keys). This keystroke sequence will prompt you to input the name of your program buffer. Type in <code>~/wrkLisp/hello-world.lisp</code> and press <code>Enter</code> (I am assuming you have created a <code>wrkLisp/</code> directory in your home directory. If you have mistyped the key sequence, you can cancel by pressing <code>C-g</code>.</li>
<li><p>
Now that you have opened a new buffer called <code>hello-world.lisp</code>, type the following Lisp program in it.
</p>
<div class="org-src-container">
<pre class="src src-lisp">(<span class="org-keyword">defun</span> <span class="org-function-name">hello</span> ()
  (format t <span class="org-string">"Hello World!"</span>))
</pre>
</div></li>
<li>Save the contents of the buffer by typing <code>C-x C-s</code>. This command
will save the contents of the buffer in
<code>~/wrkLisp/hello-world.lisp</code></li>
<li><p>
Load (i.e., compile) your program: Click anywhere inside the REPL
window. Load your program by typing the following Lisp expression
<code>(load "~/wrkLisp/hello-world.lisp")</code> on the REPL prompt, then press <code>Enter</code>,
as shown below.
</p>
<pre class="example" id="orgbee759f">
CL-USER&gt; (load "~/wrkLisp/hello-world.lisp")
T
CL-USER&gt;
</pre>
<p>
Notice two things:
</p>
<ul class="org-ul">
<li>The REPL has printed <code>T</code> (true).  For now, it suffices for you to
know that <code>T</code> means the Lisp system did not have problems loading
your program.</li>
<li>No message <code>"Hello World!"</code> was printed because your program only
contains the definition of a function that prints that string.</li>
</ul></li>
<li><p>
Finally, let&rsquo;s call function <code>hello</code> at the REPL prompt by typing
the expression <code>(hello)</code> and pressing <code>Enter</code>, as shown below.
</p>
<pre class="example" id="orga998e07">
CL-USER&gt; (hello)
Hello world!
NIL
CL-USER&gt; 
</pre>
<p>
Notice:
</p>
<ul class="org-ul">
<li>If you would like to make changes to your program, save them by
executing Step 3 above, then load your program and call your
toplevel function (or other functions belonging to your program)
at the REPL by executing Steps 4 and 5.</li>
<li>Make the following change to your program: add the expression
<code>(hello)</code> to the end of your program (after the last close
brackets). Save your file (Step 3) and load it (Step 4). What
happend?</li>
</ul></li>
<li>To quit Portacle, type <code>C-x C-c</code>. If there are any unsaved file
buffers or active processes running on other buffers, such as
SBCL&rsquo;s REPL, Emacs will ask you to confirm you would like to save
those files and kill those processes.</li>
</ol>
</div>
</section>

<section id="outline-container-orgea6041b" class="outline-2">
<h2 id="orgea6041b">Learning further</h2>
<div class="outline-text-2" id="text-orgea6041b">
<p>
I strongly encourage you to spend some time to learn the basics of
editing text/programs in Emacs. This skill will speed up your learning
of Lisp programming tremendously. There is a plethora of online
tutorials teaching the basics of Emacs. Below I list a couple of links
for resources about Lisp and Emacs:
</p>
<ul class="org-ul">
<li>This article answers a question you must be itching to ask me: <a href="https://opensource.com/article/20/12/emacs">why
Emacs?</a></li>
<li>This other article contains several answers for another question I
feel you are also itching to ask me: <a href="https://stackoverflow.com/questions/2036244/whats-so-great-about-lisp">what&rsquo;s so great about Lisp?</a></li>
<li>This website contains excellent materials to learn the essentials of
Lisp: <a href="https://cs.gmu.edu/~sean/lisp/LispTutorial.html">https://cs.gmu.edu/~sean/lisp/LispTutorial.html</a></li>
</ul>



<div class='comments'><div id='disqus_thread'></div><script type='text/javascript'>var disqus_shortname = 'johndoe-example-com'; (function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;	dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script>  <noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript></div>
</div>
</section>
</main>
<footer id="postamble" class="status">
<div class='footer'>
  Copyright © 2020 <a href='mailto:m3santos@ryerson.ca'>Marcus Santos.</a><br>
  Inspired by <a href='https://nicolas.petton.fr'>https://nicolas.petton.fr</a> <br>
  Last updated on Dec 29, 2021. Generated using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.2 (<a href="https://orgmode.org">Org</a> mode 9.4.6).
</div>
</footer>
</body>
</html>
